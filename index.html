<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ò–° ¬´–°–õ–ï–î–°–¢–í–ò–ï¬ª | –ï–î–ò–ù–´–ô –†–ï–ï–°–¢–†</title>
    <style>
        :root {
            --bg-body: #f0f2f5;
            --bg-sidebar: #1e293b;
            --bg-header: #0f172a;
            --accent-blue: #2563eb;
            --accent-red: #dc2626;
            --text-dark: #1e293b;
            --text-light: #f8fafc;
            --border: #e2e8f0;
        }

        body { margin: 0; font-family: 'Roboto', 'Segoe UI', sans-serif; background: var(--bg-body); color: var(--text-dark); height: 100vh; overflow: hidden; }

        /* LOGIN SCREEN */
        #login-overlay { position: fixed; inset: 0; background: #0f172a; z-index: 9999; display: flex; align-items: center; justify-content: center; flex-direction: column; }
        .login-box { background: #fff; padding: 40px; width: 450px; border-radius: 4px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); text-align: center; border-top: 5px solid var(--accent-red); }
        .official-seal { width: 80px; margin-bottom: 20px; }
        .form-input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #cbd5e1; border-radius: 4px; font-size: 14px; box-sizing: border-box; }
        .btn-auth { width: 100%; background: var(--accent-blue); color: white; padding: 12px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; text-transform: uppercase; }
        .btn-auth:hover { background: #1d4ed8; }

        /* MAIN LAYOUT */
        #app-container { display: none; grid-template-columns: 260px 1fr; grid-template-rows: 60px 1fr; height: 100vh; }

        /* HEADER */
        header { grid-column: 1 / 3; background: var(--bg-header); color: white; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); z-index: 10; }
        .system-title { font-weight: 700; letter-spacing: 0.5px; font-size: 1.1rem; display: flex; align-items: center; gap: 10px; }
        .badge-secret { background: var(--accent-red); padding: 2px 8px; border-radius: 2px; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 1px; }

        /* SIDEBAR */
        aside { background: var(--bg-sidebar); color: #94a3b8; display: flex; flex-direction: column; }
        .menu-cat { padding: 15px 20px 5px; font-size: 0.7rem; text-transform: uppercase; font-weight: bold; color: #64748b; margin-top: 10px; }
        .menu-item { padding: 12px 20px; cursor: pointer; transition: 0.2s; border-left: 3px solid transparent; font-size: 0.9rem; display: flex; align-items: center; gap: 10px; }
        .menu-item:hover { background: #334155; color: white; }
        .menu-item.active { background: #334155; color: white; border-left-color: var(--accent-blue); }

        /* CONTENT */
        main { padding: 30px; overflow-y: auto; }
        .paper { background: white; border: 1px solid var(--border); border-radius: 6px; padding: 25px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; }
        h2 { margin-top: 0; color: var(--text-dark); border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; font-size: 1.2rem; }

        /* TABLES & FORMS */
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th { text-align: left; padding: 12px; background: #f8fafc; border-bottom: 2px solid #e2e8f0; color: #64748b; font-weight: 600; }
        td { padding: 12px; border-bottom: 1px solid #e2e8f0; }
        tr:hover { background: #f1f5f9; }

        .tag { padding: 3px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: bold; }
        .tag-green { background: #dcfce7; color: #166534; }
        .tag-red { background: #fee2e2; color: #991b1b; }
        .tag-blue { background: #dbeafe; color: #1e40af; }

        .action-bar { display: flex; gap: 10px; margin-bottom: 20px; }
        .btn { padding: 8px 16px; border-radius: 4px; border: 1px solid #ccc; background: white; cursor: pointer; font-size: 0.8rem; font-weight: 500; }
        .btn-primary { background: var(--accent-blue); color: white; border: none; }
        .btn-danger { background: var(--accent-red); color: white; border: none; }

        /* MODAL */
        .modal-back { position: fixed; inset: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 50; }
        .modal-win { background: white; padding: 30px; width: 600px; border-radius: 6px; max-height: 90vh; overflow-y: auto; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.2); }
        label { display: block; font-size: 0.8rem; color: #64748b; margin-bottom: 4px; margin-top: 10px; }
    </style>
</head>
<body>

    <!-- AUTH -->
    <div id="login-overlay">
        <div class="login-box">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Emblem_of_the_Investigative_Committee_of_Russia.svg/1200px-Emblem_of_the_Investigative_Committee_of_Russia.svg.png" class="official-seal">
            <h3 style="margin:0 0 5px 0;">–ê–ò–° ¬´–°–õ–ï–î–°–¢–í–ò–ï¬ª</h3>
            <p style="font-size:0.8rem; color:#64748b; margin-bottom:25px;">–ï–î–ò–ù–ê–Ø –°–ï–¢–¨ –°–ö –†–û–°–°–ò–ô–°–ö–û–ô –§–ï–î–ï–†–ê–¶–ò–ò</p>
            <input id="l-login" class="form-input" placeholder="–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–§–ò–û)">
            <input id="l-pass" type="password" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ (–≠–¶–ü)">
            <button class="btn-auth" onclick="auth()">–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</button>
            <p style="margin-top:20px; font-size:0.7rem; color:#94a3b8;">–í–ù–ò–ú–ê–ù–ò–ï: –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.<br>–ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç—Å—è –ø–æ –∑–∞–∫–æ–Ω—É.</p>
        </div>
    </div>

    <!-- APP -->
    <div id="app-container">
        <header>
            <div class="system-title">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Emblem_of_the_Investigative_Committee_of_Russia.svg/1200px-Emblem_of_the_Investigative_Committee_of_Russia.svg.png" style="height:32px;">
                –ê–ò–° ¬´–°–õ–ï–î–°–¢–í–ò–ï¬ª <span class="badge-secret">–î–°–ü</span>
            </div>
            <div style="text-align:right; font-size:0.8rem;">
                <div id="u-name" style="font-weight:bold;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div id="u-rank" style="opacity:0.7;">...</div>
            </div>
        </header>

        <aside>
            <div class="menu-cat">–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞</div>
            <div class="menu-item active" onclick="nav('dashboard')">üìä –°–≤–æ–¥–∫–∞ (–î–∞—à–±–æ—Ä–¥)</div>
            <div class="menu-item" onclick="nav('kusp')">üìï –ö–£–°–ü (–†–∞–ø–æ—Ä—Ç—ã)</div>
            <div class="menu-item" onclick="nav('cases')">üìÅ –£–≥–æ–ª–æ–≤–Ω—ã–µ –¥–µ–ª–∞</div>
            <div class="menu-item" onclick="nav('crim')">üïµÔ∏è –ë–∞–∑–∞ –ª–∏—Ü (–†–æ–∑—ã—Å–∫)</div>
            
            <div class="menu-cat">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
            <div class="menu-item" onclick="nav('staff')">üë• –õ–∏—á–Ω—ã–π —Å–æ—Å—Ç–∞–≤</div>
            <div class="menu-item" onclick="nav('admin')" id="adm-link" style="display:none;">‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ</div>
            
            <div style="margin-top:auto; padding:20px;">
                <button class="btn btn-danger" style="width:100%" onclick="logout()">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ–∞–Ω—Å</button>
            </div>
        </aside>

        <main id="workspace"></main>
    </div>

    <!-- MODAL: ADD STAFF -->
    <div id="m-staff" class="modal-back">
        <div class="modal-win">
            <h2>–ü—Ä–∏–∫–∞–∑ –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏</h2>
            <label>–§–ò–û –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</label><input id="s-fio" class="form-input">
            <label>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –∑–≤–∞–Ω–∏–µ</label>
            <select id="s-rank" class="form-input">
                <option>–ì–µ–Ω–µ—Ä–∞–ª —é—Å—Ç–∏—Ü–∏–∏ –†–§</option>
                <option>–ì–µ–Ω–µ—Ä–∞–ª-–ø–æ–ª–∫–æ–≤–Ω–∏–∫ —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ì–µ–Ω–µ—Ä–∞–ª-–ª–µ–π—Ç–µ–Ω–∞–Ω—Ç —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ì–µ–Ω–µ—Ä–∞–ª-–º–∞–π–æ—Ä —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ü–æ–ª–∫–æ–≤–Ω–∏–∫ —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ü–æ–¥–ø–æ–ª–∫–æ–≤–Ω–∏–∫ —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ú–∞–π–æ—Ä —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–ö–∞–ø–∏—Ç–∞–Ω —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–°—Ç. –ª–µ–π—Ç–µ–Ω–∞–Ω—Ç —é—Å—Ç–∏—Ü–∏–∏</option>
                <option>–õ–µ–π—Ç–µ–Ω–∞–Ω—Ç —é—Å—Ç–∏—Ü–∏–∏</option>
            </select>
            <label>–î–æ–ª–∂–Ω–æ—Å—Ç—å</label><input id="s-pos" class="form-input">
            <label>–ü–∞—Ä–æ–ª—å (–í—Ä–µ–º–µ–Ω–Ω—ã–π)</label><input id="s-pass" class="form-input">
            <label>–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞</label>
            <select id="s-role" class="form-input">
                <option value="1">–°–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å</option>
                <option value="2">–ù–∞—á–∞–ª—å–Ω–∏–∫ –æ—Ç–¥–µ–ª–∞</option>
                <option value="3">–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
            </select>
            <div style="text-align:right; margin-top:20px;">
                <button class="btn" onclick="closeM()">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="addStaff()">–ò–∑–¥–∞—Ç—å –ø—Ä–∏–∫–∞–∑</button>
            </div>
        </div>
    </div>

    <script>
        // INIT DB
        const DEFAULTS = {
            users: [
                { id: 1, fio: "–ö—Ä–∞—Å–∏–Ω –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á", rank: "–ì–µ–Ω–µ—Ä–∞–ª —é—Å—Ç–∏—Ü–∏–∏ –†–§", pos: "–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å –°–ö", role: 3, pass: "–ö—Ä–∞—Å–∏–Ω222", reprimands: 0, awards: "–ó–∞ –∑–∞—Å–ª—É–≥–∏ –ø–µ—Ä–µ–¥ –û—Ç–µ—á–µ—Å—Ç–≤–æ–º II —Å—Ç." }
            ],
            kusp: [
                { id: 1402, date: "15.02.2026", text: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Ö–∏—â–µ–Ω–∏—è –ø—Ä–∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–µ –æ–±—ä–µ–∫—Ç–∞ '–ê—Ä–µ–Ω–∞'", applicant: "–û–ø–µ—Ä—É–ø–æ–ª–Ω–æ–º–æ—á–µ–Ω–Ω—ã–π –ó–∏–º–∏–Ω", status: "–í –ø—Ä–æ–≤–µ—Ä–∫–µ" }
            ],
            cases: [
                { num: "124005", article: "290 –£–ö –†–§", obj: "–ò–≤–∞–Ω–æ–≤ –ò.–ò.", investigator: "–ö—Ä–∞—Å–∏–Ω –ê.–í.", status: "–°–ª–µ–¥—Å—Ç–≤–∏–µ" }
            ],
            criminals: []
        };
        
        let DB = JSON.parse(localStorage.getItem('ais_sk_v7')) || DEFAULTS;
        let Me = null;

        function save() { localStorage.setItem('ais_sk_v7', JSON.stringify(DB)); }

        function auth() {
            const l = document.getElementById('l-login').value.trim();
            const p = document.getElementById('l-pass').value.trim();
            const u = DB.users.find(x => x.fio === l && x.pass === p);
            if(u) {
                Me = u;
                document.getElementById('login-overlay').style.display = 'none';
                document.getElementById('app-container').style.display = 'grid';
                document.getElementById('u-name').innerText = Me.fio;
                document.getElementById('u-rank').innerText = Me.rank;
                if(Me.role === 3) document.getElementById('adm-link').style.display = 'flex';
                nav('dashboard');
            } else alert("–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.");
        }

        function nav(page) {
            document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
            const main = document.getElementById('workspace');
            
            if(page === 'dashboard') {
                main.innerHTML = `
                <div class="paper">
                    <h2>–û–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–≤–æ–¥–∫–∞</h2>
                    <div style="display:grid; grid-template-columns:repeat(4,1fr); gap:20px;">
                        <div style="background:#f8fafc; padding:15px; border-radius:4px;">
                            <div style="color:#64748b; font-size:0.8rem">–í –ü–†–û–ò–ó–í–û–î–°–¢–í–ï</div>
                            <div style="font-size:1.8rem; font-weight:bold; color:var(--accent-blue)">${DB.cases.length}</div>
                        </div>
                        <div style="background:#f8fafc; padding:15px; border-radius:4px;">
                            <div style="color:#64748b; font-size:0.8rem">–ú–ê–¢–ï–†–ò–ê–õ–´ –ö–£–°–ü</div>
                            <div style="font-size:1.8rem; font-weight:bold; color:#f59e0b">${DB.kusp.length}</div>
                        </div>
                        <div style="background:#f8fafc; padding:15px; border-radius:4px;">
                            <div style="color:#64748b; font-size:0.8rem">–õ–ò–ß–ù–´–ô –°–û–°–¢–ê–í</div>
                            <div style="font-size:1.8rem; font-weight:bold;">${DB.users.length}</div>
                        </div>
                    </div>
                </div>
                <div class="paper">
                    <h3>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–ö–£–°–ü)</h3>
                    <table>
                        <tr><th>‚Ññ</th><th>–§–∞–±—É–ª–∞</th><th>–°—Ç–∞—Ç—É—Å</th></tr>
                        ${DB.kusp.slice(0,5).map(k => `<tr><td>${k.id}</td><td>${k.text}</td><td><span class="tag tag-blue">${k.status}</span></td></tr>`).join('')}
                    </table>
                </div>`;
            }
            else if(page === 'staff') {
                let h = `<div class="paper"><div class="action-bar"><h2>–õ–∏—á–Ω—ã–π —Å–æ—Å—Ç–∞–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>`;
                if(Me.role === 3) h += `<button class="btn btn-primary" onclick="document.getElementById('m-staff').style.display='flex'">+ –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</button>`;
                h += `</div><table><thead><tr><th>–ó–≤–∞–Ω–∏–µ / –§–ò–û</th><th>–î–æ–ª–∂–Ω–æ—Å—Ç—å</th><th>–í–∑—ã—Å–∫–∞–Ω–∏—è</th><th>–ü–æ–æ—â—Ä–µ–Ω–∏—è</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr></thead><tbody>`;
                
                DB.users.forEach((u, idx) => {
                    h += `<tr>
                        <td><div style="font-weight:bold">${u.rank}</div><div>${u.fio}</div></td>
                        <td>${u.pos}</td>
                        <td style="color:${u.reprimands > 0 ? 'red':'#ccc'}">${u.reprimands}</td>
                        <td style="color:green">${u.awards || '-'}</td>
                        <td>
                           ${Me.role === 3 && u.id !== Me.id ? 
                           `<button class="btn btn-danger" style="padding:4px 8px; font-size:0.7rem" onclick="fire(${idx})">–£–≤–æ–ª–∏—Ç—å</button>
                            <button class="btn" style="padding:4px 8px; font-size:0.7rem" onclick="warn(${idx})">–í—ã–≥–æ–≤–æ—Ä</button>` 
                           : '<small>–ù–µ—Ç –ø—Ä–∞–≤</small>'}
                        </td>
                    </tr>`;
                });
                main.innerHTML = h + `</tbody></table></div>`;
            }
            else if(page === 'kusp') {
                main.innerHTML = `<div class="paper"><h2>–ö–Ω–∏–≥–∞ –£—á–µ—Ç–∞ –°–æ–æ–±—â–µ–Ω–∏–π (–ö–£–°–ü)</h2><p>–†–µ–µ—Å—Ç—Ä –∑–∞—è–≤–ª–µ–Ω–∏–π –∏ —Ä–∞–ø–æ—Ä—Ç–æ–≤.</p>
                <table><thead><tr><th>‚Ññ –ö–£–°–ü</th><th>–î–∞—Ç–∞</th><th>–ó–∞—è–≤–∏—Ç–µ–ª—å</th><th>–ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</th><th>–†–µ—à–µ–Ω–∏–µ</th></tr></thead>
                <tbody>${DB.kusp.map(k => `<tr><td>${k.id}</td><td>${k.date}</td><td>${k.applicant}</td><td>${k.text}</td><td>${k.status}</td></tr>`).join('')}</tbody></table>
                <br><button class="btn btn-primary" onclick="addKusp()">+ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–ø–æ—Ä—Ç</button></div>`;
            }
            else if(page === 'admin') {
                main.innerHTML = `<div class="paper"><h2>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (–ö–∞–¥—Ä—ã –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)</h2>
                <p>–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</p>
                <div style="display:flex; gap:10px; margin-top:20px;">
                    <button class="btn btn-primary" onclick="exp()">üíæ –°–∫–∞—á–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –±–∞–∑—ã</button>
                    <button class="btn btn-danger" onclick="nuke()">‚ò¢Ô∏è –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –°–ò–°–¢–ï–ú–´</button>
                    <input type="file" id="f-upl" onchange="imp()" style="display:none">
                    <button class="btn" onclick="document.getElementById('f-upl').click()">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –±–∞–∑—É</button>
                </div></div>`;
            }
            else {
                main.innerHTML = `<div class="paper"><h2>–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</h2><p>–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –æ—Ç–¥–µ–ª –∫—Ä–∏–º–∏–Ω–∞–ª–∏—Å—Ç–∏–∫–∏.</p></div>`;
            }
        }

        // ACTIONS
        function addStaff() {
            const f = document.getElementById('s-fio').value, r = document.getElementById('s-rank').value, 
                  p = document.getElementById('s-pos').value, pass = document.getElementById('s-pass').value, role = parseInt(document.getElementById('s-role').value);
            if(!f || !pass) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –ø—Ä–∏–∫–∞–∑–∞!");
            DB.users.push({ id: Date.now(), fio: f, rank: r, pos: p, role: role, pass: pass, reprimands: 0, awards: "" });
            save(); nav('staff'); closeM();
        }

        function fire(idx) {
            if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ–µ –∫–∞–¥—Ä–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ.")) {
                DB.users.splice(idx, 1); save(); nav('staff');
            }
        }

        function warn(idx) {
            const reason = prompt("–ü—Ä–∏—á–∏–Ω–∞ –≤–∑—ã—Å–∫–∞–Ω–∏—è:");
            if(reason) { DB.users[idx].reprimands++; save(); nav('staff'); }
        }

        function addKusp() {
            const t = prompt("–§–∞–±—É–ª–∞ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è:");
            if(t) {
                DB.kusp.push({ id: Math.floor(1000 + Math.random() * 9000), date: new Date().toLocaleDateString(), text: t, applicant: Me.fio, status: "–í –ø—Ä–æ–≤–µ—Ä–∫–µ" });
                save(); nav('kusp');
            }
        }

        function closeM() { document.querySelector('.modal-back').style.display='none'; }
        function logout() { location.reload(); }
        
        function exp() {
            const a = document.createElement('a'); a.href = URL.createObjectURL(new Blob([JSON.stringify(DB)],{type:'application/json'}));
            a.download = 'ais_sledstvie_backup.json'; a.click();
        }
        function imp() {
            const r = new FileReader(); r.onload = e => { DB = JSON.parse(e.target.result); save(); location.reload(); };
            r.readAsText(document.getElementById('f-upl').files[0]);
        }
        function nuke() {
            if(confirm("–ü–û–î–¢–í–ï–†–î–ò–¢–ï: –ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∏—Ç–µ—Ç–∞?")) { localStorage.removeItem('ais_sk_v7'); location.reload(); }
        }
    </script>
</body>
</html>